<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Zone Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
            max-width: 500px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .mode-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .mode-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .mode-btn.active {
            background: #667eea;
            color: white;
        }

        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .input-section {
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
            font-size: 14px;
        }

        input[type="datetime-local"],
        input[type="date"],
        input[type="time"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="datetime-local"]:focus,
        input[type="date"]:focus,
        input[type="time"]:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
        }

        .result-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 25px;
            border-radius: 15px;
            color: white;
            text-align: center;
        }

        .result-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .result-time {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .result-date {
            font-size: 16px;
            opacity: 0.9;
        }

        .auto-detect {
            background: #f0f4ff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            color: #667eea;
            font-size: 14px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåç Time Zone Calculator</h1>
        
        <div class="auto-detect" id="autoDetect">
            <strong>Auto-detected:</strong> <span id="detectedLocation">Detecting...</span>
        </div>

        <div class="mode-selector">
            <button class="mode-btn active" id="autoBtn">Current Time</button>
            <button class="mode-btn" id="customBtn">Custom Time</button>
        </div>

        <div class="input-section">
            <div id="customInputs" class="hidden">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <label for="customDate">Date:</label>
                        <input type="date" id="customDate">
                    </div>
                    <div>
                        <label for="customTime">Time:</label>
                        <input type="time" id="customTime">
                    </div>
                </div>
                
                <label for="fromZone" style="margin-top: 20px;">From Time Zone:</label>
                <select id="fromZone">
                    <option value="Asia/Damascus">Syria (Damascus)</option>
                    <option value="Asia/Manila">Philippines (Manila)</option>
                </select>
            </div>

            <label for="toZone">Convert To:</label>
            <select id="toZone">
                <option value="Asia/Manila">Philippines (Manila)</option>
                <option value="Asia/Damascus">Syria (Damascus)</option>
            </select>
        </div>

        <div class="result-section">
            <div class="result-label" id="resultLabel">Converted Time</div>
            <div class="result-time" id="resultTime">--:--</div>
            <div class="result-date" id="resultDate">---</div>
        </div>
    </div>

    <script>
        const autoBtn = document.getElementById('autoBtn');
        const customBtn = document.getElementById('customBtn');
        const customInputs = document.getElementById('customInputs');
        const customDate = document.getElementById('customDate');
        const customTime = document.getElementById('customTime');
        const fromZone = document.getElementById('fromZone');
        const toZone = document.getElementById('toZone');
        const resultTime = document.getElementById('resultTime');
        const resultDate = document.getElementById('resultDate');
        const resultLabel = document.getElementById('resultLabel');
        const detectedLocation = document.getElementById('detectedLocation');

        let mode = 'auto';
        let updateInterval;

        // Auto-detect user's timezone and set defaults
        function autoDetectLocation() {
            const userTZ = Intl.DateTimeFormat().resolvedOptions().timeZone;
            
            if (userTZ === 'Asia/Damascus' || userTZ.includes('Syria')) {
                detectedLocation.textContent = 'Syria';
                toZone.value = 'Asia/Manila';
                fromZone.value = 'Asia/Damascus';
            } else if (userTZ === 'Asia/Manila' || userTZ.includes('Manila')) {
                detectedLocation.textContent = 'Philippines';
                toZone.value = 'Asia/Damascus';
                fromZone.value = 'Asia/Manila';
            } else {
                // Default if not in either timezone
                detectedLocation.textContent = userTZ;
                toZone.value = 'Asia/Manila';
                fromZone.value = 'Asia/Damascus';
            }
        }

        // Convert and display time
        function convertTime() {
            let sourceDate;
            let sourceZone;

            if (mode === 'auto') {
                sourceDate = new Date();
                sourceZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            } else {
                if (!customDate.value || !customTime.value) return;
                
                // Parse the date and time as if it's in the selected "From" timezone
                const dateTimeString = `${customDate.value}T${customTime.value}:00`;
                sourceZone = fromZone.value;
                
                // Create a date string that represents the time in the source timezone
                // We need to get the UTC equivalent of this time in the source timezone
                const tempDate = new Date(dateTimeString);
                
                // Get the offset of the source timezone at this date
                const sourceFormatter = new Intl.DateTimeFormat('en-US', {
                    timeZone: sourceZone,
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                });
                
                // Parse the input as if it's already in the source timezone
                // This is a workaround to create the correct UTC time
                const parts = dateTimeString.split('T');
                const [year, month, day] = parts[0].split('-');
                const [hour, minute] = parts[1].split(':');
                
                // Create ISO string assuming the input is in the source timezone
                const isoString = `${year}-${month}-${day}T${hour}:${minute}:00`;
                
                // Create a date and adjust for the timezone offset difference
                sourceDate = new Date(isoString);
                
                // Get offset for source timezone (this is hacky but works)
                const testDate = new Date(isoString);
                const utcDate = new Date(testDate.toLocaleString('en-US', { timeZone: 'UTC' }));
                const sourceDate2 = new Date(testDate.toLocaleString('en-US', { timeZone: sourceZone }));
                const diff = utcDate.getTime() - sourceDate2.getTime();
                
                sourceDate = new Date(testDate.getTime() + diff);
            }

            const targetZone = toZone.value;

            // Format the converted time
            const timeOptions = { 
                timeZone: targetZone, 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit',
                hour12: true 
            };
            
            const dateOptions = { 
                timeZone: targetZone, 
                weekday: 'long',
                year: 'numeric', 
                month: 'long', 
                day: 'numeric'
            };

            resultTime.textContent = sourceDate.toLocaleTimeString('en-US', timeOptions);
            resultDate.textContent = sourceDate.toLocaleDateString('en-US', dateOptions);

            // Update label
            const zoneName = targetZone === 'Asia/Manila' ? 'Philippines Time' : 'Syria Time';
            resultLabel.textContent = zoneName;
        }

        // Mode switching
        autoBtn.addEventListener('click', () => {
            mode = 'auto';
            autoBtn.classList.add('active');
            customBtn.classList.remove('active');
            customInputs.classList.add('hidden');
            
            // Start auto-updating
            convertTime();
            updateInterval = setInterval(convertTime, 1000);
        });

        customBtn.addEventListener('click', () => {
            mode = 'custom';
            customBtn.classList.add('active');
            autoBtn.classList.remove('active');
            customInputs.classList.remove('hidden');
            
            // Stop auto-updating
            clearInterval(updateInterval);
            
            // Set current date and time as default
            const now = new Date();
            const localDate = new Date(now.getTime() - now.getTimezoneOffset() * 60000)
                .toISOString()
                .slice(0, 10);
            const localTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000)
                .toISOString()
                .slice(11, 16);
            customDate.value = localDate;
            customTime.value = localTime;
            convertTime();
        });

        // Event listeners for custom inputs
        customDate.addEventListener('change', convertTime);
        customTime.addEventListener('change', convertTime);
        fromZone.addEventListener('change', convertTime);
        toZone.addEventListener('change', convertTime);

        // Initialize
        autoDetectLocation();
        convertTime();
        updateInterval = setInterval(convertTime, 1000);
    </script>
</body>
</html>
